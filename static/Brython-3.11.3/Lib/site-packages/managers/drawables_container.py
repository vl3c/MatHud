class DrawablesContainer:
    """
    A container for storing and accessing drawable objects by their class names.
    
    This class extracts the drawable storage functionality from Canvas,
    providing a cleaner separation of concerns.
    """
    
    def __init__(self):
        """Initialize an empty drawables container."""
        self._drawables = {}
        
    def add(self, drawable):
        """
        Add a drawable to the container.
        
        Args:
            drawable: The drawable object to add
        """
        category = drawable.get_class_name()
        if category not in self._drawables:
            self._drawables[category] = []
        self._drawables[category].append(drawable)
        
    def remove(self, drawable):
        """
        Remove a drawable from the container.
        
        Args:
            drawable: The drawable object to remove
            
        Returns:
            bool: True if the drawable was removed, False otherwise
        """
        category = drawable.get_class_name()
        if category in self._drawables and drawable in self._drawables[category]:
            self._drawables[category].remove(drawable)
            return True
        return False
        
    def get_by_class_name(self, class_name):
        """
        Get all drawables of a specific class name (private method).
        
        Args:
            class_name: The name of the class to get drawables for
            
        Returns:
            list: List of drawables of the specified class
        """
        return self._drawables.get(class_name, [])
        
    def get_all(self):
        """
        Get all drawables as a flat list.
        
        Returns:
            list: All drawables in the container
        """
        all_drawables = []
        for drawable_type in self._drawables:
            all_drawables.extend(self._drawables[drawable_type])
        return all_drawables
        
    def clear(self):
        """Remove all drawables from the container."""
        self._drawables.clear()
        
    def get_state(self):
        """
        Get the state of all drawables in the container.
        
        Returns:
            dict: Dictionary of drawable states by class name
        """
        state_dict = {}
        for category, drawables in self._drawables.items():
            state_dict[category + 's'] = [drawable.get_state() for drawable in drawables]
        return state_dict
        
    # Property-style access for specific drawable types (for convenience)
    @property
    def Points(self):
        """Get all Point objects."""
        return self.get_by_class_name('Point')
        
    @property
    def Segments(self):
        """Get all Segment objects."""
        return self.get_by_class_name('Segment')
        
    @property
    def Vectors(self):
        """Get all Vector objects."""
        return self.get_by_class_name('Vector')
        
    @property
    def Triangles(self):
        """Get all Triangle objects."""
        return self.get_by_class_name('Triangle')
        
    @property
    def Rectangles(self):
        """Get all Rectangle objects."""
        return self.get_by_class_name('Rectangle')
        
    @property
    def Circles(self):
        """Get all Circle objects."""
        return self.get_by_class_name('Circle')
        
    @property
    def Ellipses(self):
        """Get all Ellipse objects."""
        return self.get_by_class_name('Ellipse')
        
    @property
    def Functions(self):
        """Get all Function objects."""
        return self.get_by_class_name('Function')
        
    @property
    def ColoredAreas(self):
        """Get all ColoredArea objects."""
        return self.get_by_class_name('ColoredArea')
        
    @property
    def FunctionsBoundedColoredAreas(self):
        """Get all FunctionsBoundedColoredArea objects."""
        return self.get_by_class_name('FunctionsBoundedColoredArea')
        
    @property
    def Angles(self):
        """Get all Angle objects."""
        return self.get_by_class_name('Angle')
        
    @property
    def SegmentsBoundedColoredAreas(self):
        """Get all SegmentsBoundedColoredArea objects."""
        return self.get_by_class_name('SegmentsBoundedColoredArea')
        
    @property
    def FunctionSegmentBoundedColoredAreas(self):
        """Get all FunctionSegmentBoundedColoredArea objects."""
        return self.get_by_class_name('FunctionSegmentBoundedColoredArea')
        
    # Direct dictionary-like access
    def __getitem__(self, key):
        """
        Allow dictionary-like access to drawable types.
        
        Args:
            key: The class name
            
        Returns:
            list: List of drawables of the specified class
        """
        return self.get_by_class_name(key)
        
    def __contains__(self, key):
        """
        Check if the container has drawables of a specific class.
        
        Args:
            key: The class name
            
        Returns:
            bool: True if drawables of the specified class exist
        """
        return key in self._drawables 